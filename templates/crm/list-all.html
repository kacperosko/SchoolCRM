{% extends 'base/base.html' %}
{% block title %} Studenci {% endblock title %}
{% load static %}
{% load crm_tags %}
{% block content %}
    <div class="card">
        <div class="card-header d-flex justify-content-between">
            <div class="header-title">
                <h4 class="card-title">{{ model_label_plural }}</h4>
            </div>
            <div>
                {% if perms.crm.model_name %}
                    <a href="/{{ model_name }}/new"
                       class="btn btn-primary rounded-pill font-size-12 align-content-center d-inline-flex">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                             stroke="currentColor" width="18" class="mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path>
                        </svg>

                        Now{% if model_label|last == 'a' %}a{% else %}y{% endif %} {{ model_label }}
                    </a>
                {% endif %}
                {% if perms.crm.add_student %}
                    <a href="/import/student"
                       class="btn btn-outline-primary rounded-pill font-size-12 align-content-center d-inline-flex"
                       data-trigger="hover" data-toggle="popover" data-content="Importuj Studentów z pliku excel"
                       data-placement="bottom">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                             stroke="currentColor" class="w-6 h-6 mr-1" width="18">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path>
                        </svg>
                    </a>
                {% endif %}
            </div>

        </div>

        <div class="card-body">
            <div class="table-responsive">
                <div class="w-25 ml-auto mb-3 d-flex align-items-center">
                    <span class="mr-1">Szukaj:</span>
                    <input class="form-control" type="text" id="search-input" placeholder="">
                </div>

                <table id="records_table" class="table table-striped table-bordered">
                    <thead class="bg-primary-light">
                    <tr>
                        {% for field, label in fields.items %}
                            <th id="{{ field }}">
                                {{ label }}
                                <svg style="opacity: 0.5" id="{{ field }}_order_icon" xmlns="http://www.w3.org/2000/svg"
                                     fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" width="15">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"></path>
                                </svg>
                                <svg style="opacity: 0.5; transform: rotate(180deg); margin-left: -7px"
                                     id="-{{ field }}_order_icon" xmlns="http://www.w3.org/2000/svg" fill="none"
                                     viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" width="15">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"></path>
                                </svg>
                            </th>
                        {% endfor %}
                    </tr>
                    </thead>
                    <tbody>
                    {#                     Load records using javascript #}
                    </tbody>
                    {#                    <tfoot class="">#}
                    {#                    <tr>#}
                    {#                        {% for label in labels %}#}
                    {#                            <th>{{ label }}</th>#}
                    {#                        {% endfor %}#}
                    {#                    </tr>#}
                    {#                    </tfoot>#}
                </table>
                {#                <div class="d-flex justify-content-end mx-3">#}
                {#                    <div class="d-flex" style="gap: 5px">#}
                {#                        <button id="prev-page" class="btn btn-outline-primary"#}
                {#                                style="border: 1px #3378ff solid; border-radius: 8px 0 0 8px">Poprzednia#}
                {#                        </button>#}
                {#                        <span id="page-info" class="text-center p-2"#}
                {#                              style="border: 1px #3378ff solid; border-radius: 0;">}</span>#}
                {#                        <button id="next-page" class="btn btn-outline-primary"#}
                {#                                style="border: 1px #3378ff solid; border-radius: 0 8px 8px 0">Następna#}
                {#                        </button>#}
                {#                    </div>#}
                {#                </div>#}
                <div class="d-flex justify-content-end mx-3">
                    <div id="pagination" class="pagination d-flex">
                        <!-- Przyciski paginacji zostaną wygenerowane tutaj przez JavaScript -->
                    </div>
                </div>

            </div>
        </div>
    </div>
{% endblock content %}

{% block javascript %}
    <script>
        const model_name = '{{ model_name }}';
        let currentPage = 1;
        let order_field = '{{ order_field }}';

    </script>
    <script src="{% static '/js/records_viewer.js' %}"></script>
{% endblock javascript %}